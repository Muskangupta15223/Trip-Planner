
import { GoogleGenerativeAI } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: New York  for 3 days for couple with moderate budget. Give me a Hotels Option list with Hotel Name , Hotel Location, Hotel image url, geo Coordinates, Rating and description, Price , and suggest itinerary with Place Name , Place Location, Place image url, geo Coordinates of place , Rating and description,  ticket Price time travel each of the location for 3 days with each day plan activities with best time to visit \nin json format   "},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Here's a breakdown of the thought process to generate the NYC travel plan JSON:\n\n1.  **Understand the Core Request:** The user wants a 3-day travel plan for a couple visiting New York City on a moderate budget. Key requirements include:\n    *   **Location:** New York City (specifically Manhattan, as that's where most first-time visitors focus).\n    *   **Duration:** 3 days.\n    *   **Target Audience:** Couple.\n    *   **Budget:** Moderate. This is subjective, but it implies avoiding luxury hotels and super-expensive activities, while still allowing for paid attractions and decent meals. It means prioritizing value and perhaps using public transport.\n    *   **Output Format:** JSON.\n    *   **Specific Data Points:**\n        *   **Hotels:** Name, Location (Address/Neighborhood), Image URL, Geo Coordinates (Lat/Lon), Rating (e.g., out of 5), Description, Price (indicate it's an *estimate* or range).\n        *   **Itinerary:** For each day:\n            *   List of activities/places.\n            *   For each place: Name, Location (Address/Neighborhood), Image URL, Geo Coordinates (Lat/Lon), Rating, Description, Ticket Price (estimate or indicate free), Best Time to Visit, Travel Time (between locations).\n\n2.  **Structure the JSON:** A logical structure is essential for JSON. A top-level object seems appropriate, containing keys for `travelPlanDetails` (metadata like location, duration, budget), `hotelOptions`, and `dailyItinerary` (an array of day objects).\n\n    ```json\n    {\n      \"travelPlanDetails\": {\n        \"location\": \"New York City, USA\",\n        \"duration\": \"3 Days\",\n        \"targetAudience\": \"Couple\",\n        \"budget\": \"Moderate\"\n      },\n      \"hotelOptions\": [\n        // Hotel objects will go here\n      ],\n      \"dailyItinerary\": [\n        // Day 1 object\n        // Day 2 object\n        // Day 3 object\n      ]\n    }\n    ```\n\n3.  **Select Hotel Options (Moderate Budget):**\n    *   **Criteria:** Good location (accessible to attractions, safe), decent ratings (3.5+ stars), not luxury pricing. Neighborhoods like Midtown West/Times Square (convenient but busy), Chelsea, Lower East Side, or even slightly further out in Long Island City (Queens, short subway ride) could work.\n    *   **Brainstorm/Search:** Think of or search for well-regarded hotels in these areas known for value. Examples: Pod Hotels (Pod 51, Pod Times Square), YOTEL, Arlo NoMad/SoHo, citizenM, Riu Plaza Times Square (can sometimes have deals). Aim for 3-4 options.\n    *   **Gather Data for Each Hotel:**\n        *   **Name:** (e.g., Pod 51 Hotel)\n        *   **Location:** (e.g., \"230 E 51st St, New York, NY 10022, USA\", Neighborhood: Midtown East)\n        *   **Image URL:** Find a representative image online (search \"[Hotel Name] exterior\" or similar). *Self-correction: Need placeholder URLs or links to search results if actual image URLs are hard to guarantee long-term validity.* Use generic but descriptive placeholder URLs or links to image searches.\n        *   **Geo Coordinates:** Use Google Maps or a similar tool to find the Lat/Lon for the address. (e.g., 40.755 Pod 51)\n        *   **Rating:** Check Google Maps, TripAdvisor, Booking.com for average ratings (e.g., 4.1/5).\n        *   **Description:** Briefly summarize key features (e.g., \"Compact, modern rooms in a convenient Midtown location, focus on essentials and social spaces.\").\n        *   **Price:** This is tricky. State it's an *estimate* and provide a typical range (e.g., \"$150 - $250 per night\"). Emphasize that prices vary *greatly* by season, day of the week, and booking time.\n\n4.  **Design the 3-Day Itinerary:**\n    *   **Goal:** Cover major highlights logically, minimize travel time between spots within a day, mix free activities (walking, parks) with paid attractions, consider a moderate pace for a couple.\n    *   **Day 1: Midtown Icons & Times Square:**\n        *   Start centrally. Times Square (morning, less overwhelming).\n        *   Walk to Rockefeller Center (Top of the Rock optional - great views).\n        *   St. Patrick's Cathedral (nearby, free).\n        *   Grand Central Terminal (iconic architecture, free).\n        *   New York Public Library & Bryant Park (relaxing break, free).\n        *   Empire State Building (evening views optional, alternative to Top of the Rock).\n        *   *Consider:* A Broadway show in the evening (moderate budget might mean looking for TKTS deals or less famous shows). Add this as an optional evening activity.\n    *   **Day 2: Downtown & Statue of Liberty:**\n        *   Staten Island Ferry (Free! Great views of Statue of Liberty & skyline). Start from Whitehall Terminal.\n        *   Wall Street & Financial District (Charging Bull, Fearless Girl, NYSE exterior).\n        *   9/11 Memorial & Museum (Museum is paid, Memorial is free. Allow ample time, emotionally impactful).\n        *   One World Observatory (Paid, alternative viewpoint).\n        *   Walk across the Brooklyn Bridge (Start from Brooklyn side for best skyline views walking towards Manhattan, or vice-versa). *Self-correction: Starting from Manhattan is easier after One World Trade. Walk towards Brooklyn.*\n        *   Explore DUMBO/Brooklyn Bridge Park (Evening, great photos).\n    *   **Day 3: Culture, Parks & Neighborhoods:**\n        *   Central Park: Strawberry Fields, Bethesda Terrace, The Lake. (Morning walk/exploration, free).\n        *   Museum Mile: Choose one based on interest (Metropolitan Museum of Art - huge, suggested donation; Guggenheim - architecture/modern art; Natural History - family-friendly but also great for adults). Allocate significant time. *Self-correction: MET is a good default for a couple, vast collection.*\n        *   Explore a distinct neighborhood: Greenwich Village (bohemian vibe, Washington Square Park) OR SoHo (shopping, cast-iron architecture) OR Chinatown/Little Italy (cultural immersion, food). Greenwich Village offers a nice contrast.\n        *   Optional: High Line walk (elevated park, unique views, free). Can fit well after Greenwich Village or Chelsea Market visit.\n\n5.  **Gather Data for Each Itinerary Place:**\n    *   For *each* place in the itinerary:\n        *   **Place Name:** (e.g., Times Square)\n        *   **Place Location:** (e.g., \"Broadway & 7th Ave, New York, NY 10036\", Neighborhood: Midtown West)\n        *   **Place Image URL:** Find a representative image. Use placeholders/search links if necessary.\n        *   **Geo Coordinates:** Find Lat/Lon using maps.\n        *   **Rating:** Get average ratings (Google Maps, etc.).\n        *   **Description:** Brief summary of what it is/why visit.\n        *   **Ticket Price:** Specify \"Free\", \"Suggested Donation\", or provide an estimated adult ticket price (e.g., \"$35 - $45\"). *Crucial: Mention these are estimates and can change.*\n        *   **Best Time to Visit:** Suggest optimal time (e.g., \"Morning to avoid peak crowds\", \"Evening for lights\", \"Anytime during opening hours\").\n        *   **Travel Time:** Estimate travel time *from the previous location* on the itinerary using walking or subway (mention the mode). (e.g., \"Approx. 10-15 min walk\", \"Approx. 20 min subway ride\"). *Self-correction: Be realistic, factor in walking to/from stations.*\n\n6.  **Refine and Format as JSON:**\n    *   Assemble all gathered data into the structured JSON format defined in step 2.\n    *   Ensure correct JSON syntax: curly braces for objects `{}`, square brackets for arrays `[]`, keys in double quotes `\"key\"`, string values in double quotes `\"value\"`, numbers without quotes `123`, booleans as `true`/`false`, commas between elements in objects/arrays (but not after the last one).\n    *   Add introductory notes within the JSON (perhaps in a `notes` field) about budget estimation, price variability, using the subway (MetroCard), booking in advance, and checking opening hours.\n    *   Double-check all fields are present as requested. Pay close attention to geo-coordinates, image URLs (even if placeholders), ratings, and price estimates.\n    *   Use an online JSON validator to check the final output for syntax errors.\n\n7.  **Final Review:** Read through the generated JSON content. Does the itinerary flow logically? Is the budget consideration reflected? Are the descriptions helpful? Are the estimates reasonable? Is the formatting correct? (Self-correction: Ensure image URLs are generic enough or clearly marked as placeholders/search links, as specific URLs can break easily). Add a disclaimer about prices and opening hours always needing verification."},
            {text: "```json\n{\n  \"travelPlanDetails\": {\n    \"location\": \"New York City, USA\",\n    \"duration\": \"3 Days\",\n    \"targetAudience\": \"Couple\",\n    \"budget\": \"Moderate\",\n    \"notes\": [\n      \"This plan assumes usage of the NYC Subway system for efficient travel. Consider purchasing a 7-day unlimited MetroCard if making frequent trips, or use OMNY tap-to-pay.\",\n      \"Hotel and ticket prices are estimates and can vary significantly based on season, booking time, day of the week, and availability. Book in advance for better rates.\",\n      \"Restaurant costs are not explicitly included but aim for a mix of budget-friendly eats (street food, cafes, slice shops) and moderately priced sit-down meals.\",\n      \"Always check official websites for the latest opening hours, ticket prices, and any specific entry requirements before visiting.\",\n      \"Moderate budget implies choosing value-oriented hotels and balancing paid attractions with free activities.\"\n    ]\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Pod 51 Hotel\",\n      \"hotelLocation\": \"230 E 51st St, New York, NY 10022 (Midtown East)\",\n      \"hotelImageURL\": \"https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7558,\n        \"longitude\": -73.9685\n      },\n      \"rating\": \"4.1/5\",\n      \"description\": \"Stylish micro-hotel focusing on essentials. Offers compact, efficient rooms, some with shared bathrooms (check booking details), social spaces, and a rooftop deck. Great for budget-conscious travelers who prioritize location.\",\n      \"priceEstimatePerNight\": \"$150 - $250\"\n    },\n    {\n      \"hotelName\": \"YOTEL New York Times Square\",\n      \"hotelLocation\": \"570 10th Ave, New York, NY 10036 (Midtown West/Hell's Kitchen)\",\n      \"hotelImageURL\": \"https://images.unsplash.com/photo-1582719508461-905c673771fd?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7594,\n        \"longitude\": -73.9954\n      },\n      \"rating\": \"4.2/5\",\n      \"description\": \"Modern hotel with tech-savvy 'cabins'. Features adjustable SmartBeds, city views from many rooms, a large outdoor terrace (seasonal), and automated check-in/out. Slightly west but walkable to Times Square and Theatre District.\",\n      \"priceEstimatePerNight\": \"$180 - $300\"\n    },\n    {\n      \"hotelName\": \"Arlo NoMad\",\n      \"hotelLocation\": \"11 E 31st St, New York, NY 10016 (NoMad)\",\n      \"hotelImageURL\": \"https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7461,\n        \"longitude\": -73.9846\n      },\n      \"rating\": \"4.3/5\",\n      \"description\": \"Chic micro-hotel with efficiently designed rooms, often featuring stunning city views (especially higher floors). Known for its popular rooftop bar ('A.R.T. NoMad') and central location near the Empire State Building.\",\n      \"priceEstimatePerNight\": \"$200 - $350\"\n    },\n    {\n      \"hotelName\": \"citizenM New York Times Square\",\n      \"hotelLocation\": \"218 W 50th St, New York, NY 10019 (Midtown West/Times Square)\",\n      \"hotelImageURL\": \"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7615,\n        \"longitude\": -73.9848\n      },\n      \"rating\": \"4.5/5\",\n      \"description\": \"Trendy hotel with high-tech rooms controlled by an iPad (or app), XL king-size beds, and vibrant communal spaces. Offers a rooftop bar and is very close to Broadway theaters and Times Square.\",\n      \"priceEstimatePerNight\": \"$220 - $380\"\n    }\n  ],\n  \"dailyItinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"Midtown Icons & Evening Lights\",\n      \"activities\": [\n        {\n          \"placeName\": \"Times Square\",\n          \"placeLocation\": \"Broadway & 7th Ave, New York, NY 10036 (Midtown West)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1523945248699-141633b59433?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7580,\n            \"longitude\": -73.9855\n          },\n          \"rating\": \"4.0/5\",\n          \"description\": \"Iconic hub of flashing billboards, bustling crowds, and street performers. Experience the energy, but maybe don't linger too long. Good starting point.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Morning (9-10 AM) for fewer crowds, or evening for the full dazzling effect.\",\n          \"travelTime\": \"N/A (Starting Point)\"\n        },\n        {\n          \"placeName\": \"Top of the Rock Observation Deck\",\n          \"placeLocation\": \"30 Rockefeller Plaza, New York, NY 10112 (Midtown)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1547614036-94850f1f1a18?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7591,\n            \"longitude\": -73.9798\n          },\n          \"rating\": \"4.7/5\",\n          \"description\": \"Observation deck at Rockefeller Center offering stunning panoramic views, including a clear shot of the Empire State Building and Central Park.\",\n          \"ticketPrice\": \"Approx. $40-$50 per adult\",\n          \"bestTimeToVisit\": \"Late Afternoon/Sunset for day and night views. Book tickets online in advance.\",\n          \"travelTime\": \"Approx. 10-15 min walk from Times Square.\"\n        },\n        {\n          \"placeName\": \"St. Patrick's Cathedral\",\n          \"placeLocation\": \"5th Ave, New York, NY 10022 (Midtown)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1605431998687-45f55346519d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7584,\n            \"longitude\": -73.9759\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"Beautiful Neo-Gothic Roman Catholic cathedral. An architectural marvel and peaceful oasis on busy 5th Avenue. Free to enter and look around respectfully.\",\n          \"ticketPrice\": \"Free (Donations welcome)\",\n          \"bestTimeToVisit\": \"Anytime during visiting hours (check website).\",\n          \"travelTime\": \"Approx. 5 min walk from Rockefeller Center.\"\n        },\n        {\n          \"placeName\": \"Grand Central Terminal\",\n          \"placeLocation\": \"89 E 42nd St, New York, NY 10017 (Midtown East)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1526081366613-1370eb1686e5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7527,\n            \"longitude\": -73.9772\n          },\n          \"rating\": \"4.7/5\",\n          \"description\": \"Historic and stunning train terminal known for its grand Main Concourse, celestial ceiling, Whispering Gallery, and architecture. Explore the main hall and lower level dining concourse.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Mid-day (avoid peak rush hour 8-9:30 AM & 5-6:30 PM).\",\n          \"travelTime\": \"Approx. 10-12 min walk from St. Patrick's.\"\n        },\n        {\n          \"placeName\": \"New York Public Library (Stephen A. Schwarzman Building) & Bryant Park\",\n          \"placeLocation\": \"476 5th Ave, New York, NY 10018 (Midtown)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1614650100115-a9381c20f776?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7532,\n            \"longitude\": -73.9822\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"Iconic library with stunning architecture (Astor Hall, Rose Main Reading Room - check access). Adjacent Bryant Park is a lovely green space for relaxing, people-watching, and often has events/seasonal markets.\",\n          \"ticketPrice\": \"Free (Library entry and park)\",\n          \"bestTimeToVisit\": \"Library: during opening hours. Park: Afternoon/early evening.\",\n          \"travelTime\": \"Approx. 5-7 min walk from Grand Central.\"\n        },\n        {\n          \"placeName\": \"Optional: Broadway Show\",\n          \"placeLocation\": \"Theatre District (Around Times Square)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1504311746818-d6f56179e30c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7590,\n            \"longitude\": -73.9845\n          },\n          \"rating\": \"4.7/5 (Varies by show)\",\n          \"description\": \"Experience a world-class theater performance. Look for deals at the TKTS booth in Times Square for same-day discounted tickets (moderate budget option) or book a specific show in advance.\",\n          \"ticketPrice\": \"$50 - $200+ (TKTS often 30-50% off)\",\n          \"bestTimeToVisit\": \"Evening (shows usually start 7 PM or 8 PM)\",\n          \"travelTime\": \"Approx. 10-15 min walk from Bryant Park/NYPL area back towards Times Square.\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Downtown History & Brooklyn Views\",\n      \"activities\": [\n        {\n          \"placeName\": \"Staten Island Ferry (for Statue of Liberty Views)\",\n          \"placeLocation\": \"Whitehall Terminal, 4 South St, New York, NY 10004 (Financial District)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1568318698648-3657c1b95772?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7013,\n            \"longitude\": -74.0131\n          },\n          \"rating\": \"4.6/5\",\n          \"description\": \"Free commuter ferry providing excellent views of the Statue of Liberty, Ellis Island, and the Lower Manhattan skyline. Round trip takes about 1 hour.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Morning (9-11 AM) to avoid harshest midday sun and potentially fewer crowds.\",\n          \"travelTime\": \"Approx. 20-30 min subway ride from Midtown hotel areas to Whitehall Terminal (South Ferry station).\"\n        },\n        {\n          \"placeName\": \"Financial District Exploration (Wall Street, Charging Bull)\",\n          \"placeLocation\": \"Wall St, New York, NY (Financial District)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1601909183431-31465a4b9970?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7061,\n            \"longitude\": -74.0088\n          },\n          \"rating\": \"4.2/5\",\n          \"description\": \"Walk through the heart of global finance. See the New York Stock Exchange exterior, Federal Hall, Trinity Church, and take photos with the iconic Charging Bull statue (expect a queue) and Fearless Girl.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Weekday mornings/midday for the 'buzz', weekends for fewer crowds.\",\n          \"travelTime\": \"Approx. 5-10 min walk from Whitehall Terminal.\"\n        },\n        {\n          \"placeName\": \"9/11 Memorial & Museum\",\n          \"placeLocation\": \"180 Greenwich St, New York, NY 10007 (World Trade Center)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1568402102990-bc5413d400ae?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7115,\n            \"longitude\": -74.0127\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"The Memorial features two reflecting pools in the footprints of the Twin Towers (free to visit). The Museum (paid entry) offers exhibits on the history of 9/11. Allow ample time (2-3 hours for Museum). Can be emotionally intense.\",\n          \"ticketPrice\": \"Memorial: Free. Museum: Approx. $28-$33 per adult (book timed tickets online).\",\n          \"bestTimeToVisit\": \"Anytime during opening hours. Book museum tickets in advance.\",\n          \"travelTime\": \"Approx. 10-15 min walk from Wall St area.\"\n        },\n         {\n          \"placeName\": \"One World Observatory\",\n          \"placeLocation\": \"285 Fulton St, New York, NY 10007 (World Trade Center)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1506805581317-9bb965428683?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7132,\n            \"longitude\": -74.0134\n          },\n          \"rating\": \"4.6/5\",\n          \"description\": \"Observation deck at the top of One World Trade Center, the tallest building in the Western Hemisphere. Offers 360-degree views of NYC and beyond.\",\n          \"ticketPrice\": \"Approx. $43-$53 per adult\",\n          \"bestTimeToVisit\": \"Afternoon/Sunset. Consider choosing between this and Top of the Rock for budget reasons.\",\n          \"travelTime\": \"Approx. 5 min walk from 9/11 Memorial.\"\n        },\n        {\n          \"placeName\": \"Walk the Brooklyn Bridge\",\n          \"placeLocation\": \"Starts near City Hall Park (Manhattan) or Cadman Plaza East (Brooklyn)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1519011570988-b75513756c4b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7061,  /* Mid-span approx */\n            \"longitude\": -73.9969\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"Iconic walk across the historic bridge with fantastic skyline views. Recommend walking from Brooklyn towards Manhattan for the best perspective, but walking from Manhattan after WTC is also convenient.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Late afternoon/early evening for sunset views, or morning for fewer people.\",\n          \"travelTime\": \"Approx. 15-20 min walk from One World Observatory area to Manhattan bridge entrance (near City Hall).\"\n        },\n        {\n          \"placeName\": \"Explore DUMBO, Brooklyn\",\n          \"placeLocation\": \"Neighborhood in Brooklyn near the Manhattan Bridge Overpass (DUMBO)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1568704006642-8594114e8d1f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7033, /* Washington Street photo spot */\n            \"longitude\": -73.9906\n          },\n          \"rating\": \"4.6/5\",\n          \"description\": \"Trendy neighborhood (Down Under the Manhattan Bridge Overpass) with cobblestone streets, art galleries, boutiques, great pizza (Grimaldi's, Juliana's), and the famous photo spot on Washington Street. Relax in Brooklyn Bridge Park.\",\n          \"ticketPrice\": \"Free (unless shopping/dining)\",\n          \"bestTimeToVisit\": \"Late Afternoon / Evening\",\n          \"travelTime\": \"Walk across the Brooklyn Bridge (approx. 30-45 mins walking) ends near DUMBO.\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Parks, Museums & Village Vibes\",\n      \"activities\": [\n        {\n          \"placeName\": \"Central Park Exploration\",\n          \"placeLocation\": \"Central Park, New York, NY (Upper West Side/Upper East Side/Midtown)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1560751363-ba392356e29c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7812, /* Approx Center */\n            \"longitude\": -73.9665\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"Vast urban park. Explore key spots like Strawberry Fields (John Lennon memorial), Bethesda Terrace & Fountain, The Lake (rent a rowboat seasonally), Sheep Meadow, or just wander the paths. Focus on the southern half for efficiency.\",\n          \"ticketPrice\": \"Free (boat rentals extra)\",\n          \"bestTimeToVisit\": \"Morning or Afternoon.\",\n          \"travelTime\": \"Approx. 15-25 min subway ride from hotel areas to park entrances (e.g., Columbus Circle, 59th St).\"\n        },\n        {\n          \"placeName\": \"The Metropolitan Museum of Art (The Met)\",\n          \"placeLocation\": \"1000 5th Ave, New York, NY 10028 (Upper East Side / Museum Mile)\",\n          \"placeImageURL\": \"https://images.unsplash.com/photo-1517495303324-e3ae572c9b55?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7794,\n            \"longitude\": -73.9632\n          },\n          \"rating\": \"4.8/5\",\n          \"description\": \"One of the world's largest and finest art museums. Vast collection spanning global history. Choose a few wings/exhibits to focus on (e.g., Egyptian Art, European Paintings, The American Wing). Allow 2-4 hours minimum.\",\n          \"ticketPrice\": \"Suggested Admission for NY/NJ/CT residents; General Admission Approx. $30 per adult for others (check website).\",\n          \"bestTimeToVisit\": \"Weekday mornings slightly after opening to avoid initial rush.\",\n          \"travelTime\": \"Approx. 15-20 min walk across Central Park (from west side) or along 5th Ave (from south).\"\n        },\n        {\n          \"placeName\": \"Explore Greenwich Village & Washington Square Park\",\n          \"placeLocation\": \"Greenwich Village neighborhood, centered around Washington Square Park, NY\",\n          \"placeImageURL\": \"https://images.unsplash.com/"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: New York  for 3 days for couple with moderate budget. Give me a Hotels Option list with Hotel Name , Hotel Location, Hotel image url, geo Coordinates, Rating and description, Price , and suggest itinerary with Place Name , Place Location, Place image url, geo Coordinates of place , Rating and description,  ticket Price time travel each of the location for 3 days with each day plan activities with best time to visit\nin json format\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"travelPlanDetails\": {\n    \"location\": \"New York City, USA\",\n    \"duration\": \"3 Days\",\n    \"targetAudience\": \"Couple\",\n    \"budget\": \"Moderate\",\n    \"notes\": [\n      \"This itinerary prioritizes using the subway for efficient travel.  Consider purchasing a 7-day unlimited MetroCard for cost-effectiveness.  OMNY is also a tap-to-pay option.\",\n      \"Hotel and ticket prices are estimates and can vary greatly depending on the season, booking time, and day of the week.  Booking in advance is recommended for better rates.\",\n      \"Restaurant costs are not included but factor in a mix of budget-friendly options (street food, delis, casual eateries) and some moderately priced meals.\",\n      \"Always verify opening hours and ticket prices on official websites before your visit.\",\n      \"Travel times are estimates and may vary due to traffic or subway delays.\"\n    ]\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"The Jane Hotel\",\n      \"hotelLocation\": \"113 West 11th Street, New York, NY 10011 (West Village)\",\n      \"hotelImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/The_Jane_Hotel_Exterior.jpg/1280px-The_Jane_Hotel_Exterior.jpg\", \n      \"geoCoordinates\": {\n        \"latitude\": 40.7376,\n        \"longitude\": -74.0028\n      },\n      \"rating\": \"4.0/5\",\n      \"description\": \"Historic hotel with unique, compact rooms. Some rooms are quite small, but the location in the West Village is excellent.\",\n      \"priceEstimatePerNight\": \"$150-$250\"\n    },\n    {\n      \"hotelName\": \"Library Hotel\",\n      \"hotelLocation\": \"299 Madison Avenue, New York, NY 10017 (Midtown)\",\n      \"hotelImageURL\": \"https://www.libraryhotel.com/wp-content/uploads/2023/04/library-hotel-exterior-new-york-city-new-york.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7512,\n        \"longitude\": -73.9783\n      },\n      \"rating\": \"4.5/5\",\n      \"description\": \"Boutique hotel themed around books and literature. Offers a unique and cozy atmosphere.  A bit pricier but still within moderate range if booked in advance.\",\n      \"priceEstimatePerNight\": \"$200-$350\"\n    },\n    {\n      \"hotelName\": \"Row NYC\",\n      \"hotelLocation\": \"700 8th Avenue, New York, NY 10036 (Midtown West)\",\n      \"hotelImageURL\": \"https://dynamic-media.cdn.cnn.com/api/v1/image/3000000006621568.jpg?q=80&w=1600&h=1200&size=600\",\n      \"geoCoordinates\": {\n        \"latitude\": 40.7617,\n        \"longitude\": -73.9873\n      },\n      \"rating\": \"4.2/5\",\n      \"description\": \"Modern hotel with a lively atmosphere, conveniently located near Times Square. Offers various room types and amenities.\",\n      \"priceEstimatePerNight\": \"$180-$300\"\n    }\n  ],\n  \"dailyItinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"Downtown Exploration\",\n      \"activities\": [\n        {\n          \"placeName\": \"Statue of Liberty & Ellis Island\",\n          \"placeLocation\": \"Liberty Island & Ellis Island, New York Harbor\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Statue_of_Liberty_Liberty_Island.jpg/1280px-Statue_of_Liberty_Liberty_Island.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.6892,\n            \"longitude\": -74.0445\n          },\n          \"rating\": \"4.7/5\",\n          \"description\": \"Iconic symbols of American history.  Ferry access required (book tickets well in advance!). Allow a full day.\",\n          \"ticketPrice\": \"$30-$40 per person (ferry & access)\",\n          \"bestTimeToVisit\": \"Morning to avoid afternoon crowds and heat.\",\n          \"travelTime\": \"Subway to Battery Park (approx. 30-45 minutes from Midtown).\"\n        },\n        {\n          \"placeName\": \"One World Observatory\",\n          \"placeLocation\": \"117 West Street, New York, NY 10007 (Financial District)\",\n          \"placeImageURL\": \"https://www.oneworldobservatory.com/sites/default/files/styles/full_width/public/2023-01/ONEW-Hero-Image-Winter-2023-Web-1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7129,\n            \"longitude\": -74.0134\n          },\n          \"rating\": \"4.5/5\",\n          \"description\": \"Stunning views from the top of One World Trade Center.\",\n          \"ticketPrice\": \"$40-$50 per person\",\n          \"bestTimeToVisit\": \"Late afternoon for sunset views.\",\n          \"travelTime\": \"Walk or short subway ride from Battery Park (approx. 15-20 minutes).\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Midtown Marvels\",\n      \"activities\": [\n        {\n          \"placeName\": \"Times Square\",\n          \"placeLocation\": \"Broadway and 7th Avenue, New York, NY 10036 (Midtown)\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Times_Square_by_night.jpg/1280px-Times_Square_by_night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7577,\n            \"longitude\": -73.9857\n          },\n          \"rating\": \"3.8/5 (can be overwhelming!)\",\n          \"description\": \"Experience the bright lights and energy of this iconic location.  It can be crowded.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Morning or early afternoon to avoid the biggest crowds.\",\n          \"travelTime\": \"Subway from Downtown (approx. 20-30 minutes).\"\n        },\n        {\n          \"placeName\": \"Top of the Rock\",\n          \"placeLocation\": \"30 Rockefeller Plaza, New York, NY 10112 (Midtown)\",\n          \"placeImageURL\": \"https://www.topoftherocknyc.com/sites/default/files/styles/full_width/public/2023-07/TOR-HERO-Summer-web-1200x630.jpg?itok=6L3gU0rV\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7589,\n            \"longitude\": -73.9790\n          },\n          \"rating\": \"4.6/5\",\n          \"description\": \"Observation deck offering amazing city views, especially of Central Park and the Empire State Building.\",\n          \"ticketPrice\": \"$40-$50 per person\",\n          \"bestTimeToVisit\": \"Afternoon/sunset for great lighting.\",\n          \"travelTime\": \"Short walk from Times Square (approx. 10-15 minutes).\"\n        },\n        {\n          \"placeName\": \"Central Park\",\n          \"placeLocation\": \"Central Park, New York, NY (Midtown/Upper West Side)\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Central_Park_from_above.jpg/1280px-Central_Park_from_above.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7829,\n            \"longitude\": -73.9654\n          },\n          \"rating\": \"4.9/5\",\n          \"description\": \"Enjoy a walk or bike ride through this vast urban oasis.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Afternoon for a relaxing stroll.\",\n          \"travelTime\": \"Subway or walk from Top of the Rock (approx. 20 minutes by subway or 45-60 minutes by walk).\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Museums & Neighborhoods\",\n      \"activities\": [\n        {\n          \"placeName\": \"Metropolitan Museum of Art (The Met)\",\n          \"placeLocation\": \"1000 5th Avenue, New York, NY 10028 (Upper East Side)\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Metropolitan_Museum_of_Art_exterior_2012.jpg/1280px-Metropolitan_Museum_of_Art_exterior_2012.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7794,\n            \"longitude\": -73.9632\n          },\n          \"rating\": \"4.7/5\",\n          \"description\": \"World-renowned art museum with a vast collection.  Allow several hours to explore.\",\n          \"ticketPrice\": \"Suggested donation (about $30 per person)\",\n          \"bestTimeToVisit\": \"Morning to avoid larger crowds.\",\n          \"travelTime\": \"Subway from Midtown (approx. 15-20 minutes).\"\n        },\n        {\n          \"placeName\": \"Greenwich Village\",\n          \"placeLocation\": \"Greenwich Village, New York, NY\",\n          \"placeImageURL\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Washington_Square_Park_at_sunset.jpg/1280px-Washington_Square_Park_at_sunset.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 40.7312,\n            \"longitude\": -73.9962\n          },\n          \"rating\": \"4.6/5\",\n          \"description\": \"Charming neighborhood with historic architecture, independent shops, and a bohemian vibe. Explore Washington Square Park.\",\n          \"ticketPrice\": \"Free\",\n          \"bestTimeToVisit\": \"Afternoon or evening for a relaxed stroll.\",\n          \"travelTime\": \"Subway from The Met (approx. 20-25 minutes).\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Remember:**  Image URLs are examples.  Always double-check the validity of URLs before using them in your application.  Consider using a placeholder image if the URL becomes invalid.  Ticket prices are estimates. Always check official websites for the most up-to-date pricing and availability.\n"},
          ],
        },
      ],
    });
  
    const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // TODO: Following code needs to be updated for client-side apps.
    const candidates = result.response.candidates;
    for(let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
      for(let part_index = 0; part_index < candidates[candidate_index].content.parts.length; part_index++) {
        const part = candidates[candidate_index].content.parts[part_index];
        if(part.inlineData) {
          try {
            const filename = `output_${candidate_index}_${part_index}.${mime.extension(part.inlineData.mimeType)}`;
            fs.writeFileSync(filename, Buffer.from(part.inlineData.data, 'base64'));
            console.log(`Output written to: ${filename}`);
          } catch (err) {
            console.error(err);
          }
        }
      }
    }

  
  
